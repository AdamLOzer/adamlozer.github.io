<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Adam L. Ozer">
<meta name="dcterms.date" content="2024-05-13">

<title>Adam L. Ozer, Ph.D.&nbsp;- The UK MP Inbox - A Sneak Peek</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<link rel="stylesheet" href="../post_theme.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Adam L. Ozer, Ph.D.</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../blog/index.html"> 
<span class="menu-text">DS Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://drive.google.com/file/d/1Qjok1SjCKTVaR0I15d9rqvYEfcHBUf-y/view"> <i class="bi bi-link" role="img">
</i> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../publications.html"> 
<span class="menu-text">Projects &amp; Publications</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#why-build-a-database-of-e-newsletters" id="toc-why-build-a-database-of-e-newsletters" class="nav-link active" data-scroll-target="#why-build-a-database-of-e-newsletters">Why build a database of e-newsletters?</a></li>
  <li><a href="#how-many-mps-are-consistently-using-e-newsletters" id="toc-how-many-mps-are-consistently-using-e-newsletters" class="nav-link" data-scroll-target="#how-many-mps-are-consistently-using-e-newsletters">How many MPs are consistently using e-newsletters?</a></li>
  <li><a href="#what-trends-do-we-see-among-the-parties" id="toc-what-trends-do-we-see-among-the-parties" class="nav-link" data-scroll-target="#what-trends-do-we-see-among-the-parties">What trends do we see among the parties?</a></li>
  <li><a href="#what-is-next" id="toc-what-is-next" class="nav-link" data-scroll-target="#what-is-next">What is next?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The UK MP Inbox - A Sneak Peek</h1>
<p class="subtitle lead"><span style="font-family: Calibri;">Every official email newsletter from UK Members of Parliament in one comprehensive database.</span></p>
  <div class="quarto-categories">
    <div class="quarto-category">politics</div>
    <div class="quarto-category">data science</div>
    <div class="quarto-category">MP Inbox</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Adam L. Ozer </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 13, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>In autumn of 2023, I started building <strong>The UK MP Inbox</strong> as part of <a href="https://www.veriangroup.com/"><strong>Verian’s</strong></a> broader Future of Evidence initiative. Inspired by its American predecessor, <a href="https://www.dcinbox.com/"><strong>The DC Inbox</strong></a>, the UK MP Inbox is a consistently updated, publicly available database of every official email newsletter sent by UK Members of Parliament. These e-newsletters can be used in a wide variety of public sector and academic-oriented social science research, providing important insights into strategic political messaging, policy-making, and the relevant political zeitgeist.</p>
<p>The UK MP Inbox is on track for a full public launch in late summer 2024 (official date TBD), just in time for the looming UK General Election. In the meantime, I have already collected thousands of e-newsletters since late November of 2023, with more coming in each and every day. So while we build up to a launch day, I am happy to share the first of several semi-regular updates on the Inbox’s progress, walking you through the motivation behind this project and providing a sneak peek at the patterns in the data collected thus far.</p>
<center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="blog_1_front_end_screenshot.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>A screenshot of the database’s UI</figcaption>
</figure>
</div>
</center>
<section id="why-build-a-database-of-e-newsletters" class="level2">
<h2 class="anchored" data-anchor-id="why-build-a-database-of-e-newsletters">Why build a database of e-newsletters?</h2>
<p>Our goals for this project are oriented both around social science/public policy research and the general normative democratic public good.</p>
<p>From a social science and public policy perspective, e-newsletters allow MPs and their staffs to communicate more directly with their constituents than any other form of messaging. Most traditional public statements made by MPs are relayed through the media, meaning public officials lack direct control over <strong>if</strong>, <strong>when</strong>, <strong>how</strong>, and <strong>to whom</strong> the message is reported among other competing messages and stories. While messaging through social media offers some more direct control, communication is nonetheless subject to the whims of the website’s algorithm and business incentives.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>In contrast, e-newsletters allow public officials to send direct, unfiltered messaging and information to the email inboxes of their desired audience: local constituents and potential voters that are likely highly politically engaged (they have self-selected into the audience, after all). As a result, e-newsletters allow MPs to reach their core audience and discuss the issues and topics that they most want their constituents to hear. Meanwhile, local constituents receive a free<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> resource that allows them to interact directly with democratic representatives and stay informed about policies, issues, and events that impact their local communities just by signing up.</p>
<p>By collecting these e-newsletters into one convenient database, social scientists can use them as data to better understand political communication strategies, key issues in local and national politics, political engagement and mobilisation, and other key aspects of democratic communication. Moreover, these data can be used in conjunction with public opinion data to add valuable context to polling trends and improve the breadth and depth of quantitative and qualitative insights. I, in my humble and completely unbiased opinion, highly recommend sourcing these polling data from Verian, an industry leader in public sector research in the UK and globally.</p>
<p>Yet, beyond the policy and political research motivations, the UK MP Inbox represents an important normative good for the UK public. What politicians say and how they use their time or resources is of public interest. There ought to be public records reflecting that. Like any other form of communication from public officials, e-newsletters influence public discourse on policy or electoral politics and are written using staff and resources funded with taxpayer money. While other forms of MP behaviour are dutifully documented by the government itself (e.g.&nbsp;MPs’ expenses, voting records, and statements made in parliament), there is no such comprehensive record of e-newsletters to date. While it is a small gesture in the grand scheme, an endeavour that allows one to provide open-source data for scientists while archiving information for the public is likely one worth pursuing.</p>
</section>
<section id="how-many-mps-are-consistently-using-e-newsletters" class="level2">
<h2 class="anchored" data-anchor-id="how-many-mps-are-consistently-using-e-newsletters">How many MPs are consistently using e-newsletters?</h2>
<p>Perhaps unsurprisingly, some MP offices appear to be a bit more tech saavy than others, which is reflected in their e-newsletter usage. Of the 650+<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> MPs, roughly 91.7% have a functioning website.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> A total of 400 (61.3%) have some form of e-newsletter sign up.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Since late November 2023, 200 MPs (30.6% of all MPs; 50.0% of MPs with e-newsletter sign ups) have sent at least one newsletter, with a total of 1899 newsletters received as 13 May, 2024. Notably, among the past two leaders of the Conservative and Labour parties, only Liz Truss has sent any e-newsletters since the start of November 2023.</p>
<center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="blog_1_per_mp_hist.jpg" class="img-fluid figure-img" style="width:85.0%"></p>
<figcaption>Figure 1. Total e-newsletters sent per MP (among MPs active e-newsletters; n = 1899)</figcaption>
</figure>
</div>
</center>
<p><strong>Figure 1</strong> presents the distribution of total e-newsletters sent per MP from 26 November, 2023 to 13 May, 2024. The majority of MPs with active e-newsletters tend to send about one per month. These patterns are reflected in the rightward skew of this distribution, concentrating around one e-newsletter per month per MP (mean = 9.5; median = 6). A smaller share of MPs tend to send out e-newsletters on a roughly weekly or bi-weekly basis (for context, the time period here covers just over 23 weeks). A handful of MPs send out e-newsletters more frequently still. However, among all MPs, one serves as a true outlier: John Redwood (Wokingham, Conservative), who sends multiple updates per day, and is the proverbial king of e-newsletter usage to date.</p>
<p>This leads to an interesting question: why don’t more MPs utilise e-newsletters? After all, maintaining an active e-newsletter is extremely low cost relative to other forms of communication. This fact does not appear to be lost on U.S. legislators, who make much more frequent use of e-newsletters. I plan to explore this fact and this question in a future blog post. Yet, for the purposes of building intrigue, I would highlight three potential suspects: 1) office staff funding &amp; parliamentary expense rules, 2) party structure and incentives, and 3) a potential lack of perceived utility among the MPs (driven by a myriad of potential causes). For the moment, let us dip our toes into suspect #2 and take a very brief descriptive look at some party-based patterns.</p>
</section>
<section id="what-trends-do-we-see-among-the-parties" class="level2">
<h2 class="anchored" data-anchor-id="what-trends-do-we-see-among-the-parties">What trends do we see among the parties?</h2>
<p>A quick look at some descriptive patterns makes one thing abundantly clear: Conservative MPs make much more frequent use of e-newsletters than Labour MPs. Figures 2A and 2B present a simple count of the number of MPs with active newsletters (2A) and the total number of newsletters sent since November 2023 based on party (2B).<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> There are roughly 4.3 times as many Conservative MPs with active e-newsletters as Labour. As a result, Tory MPs have sent 6 times as many newsletters as Labour MPs.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> It is worth noting that this pattern is partially driven by the disparity in the number of seats between Conservatives and Labour. Yet, even if one were to look at these data as a proportion of each party, it would be evident that Conservative MPs make much more widespread and frequent use of e-newsletters than their Labour counterparts.</p>
<center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="blog_1_frequency_plots.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 2. Frequency of MP e-newsletters</figcaption>
</figure>
</div>
</center>
<p>Unsurprisingly, the smaller parties lag behind in raw numbers of MPs and total e-newsletters. While party size is the driving factor here, these patterns may also be a function of party structure. For example, while many Liberal Democrats have their own independent websites and e-newsletters, other parties like Sinn Féin appear to take on a much more centralised approach to communication in general. This is reflected in the fact that Sinn Féin representatives have profiles on the party website rather than their own individual websites.</p>
<p><strong>Figure 3</strong> depicts the weekly trends in e-newsletters for Conservative and Labour MPs. The dotted lines represent the total number of e-newsletters sent that week, while the solid lines represent the conditional mean trend line (with 95% confidence interval).</p>
<center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="blog1_mp_per_week.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 3. Trends in e-newsletters per week for Conservative and Labour MPs</figcaption>
</figure>
</div>
</center>
<p>The data reveal two basic trends of note. First, MPs tend to schedule their e-newsletters to be delivered towards the beginning or end of the month, resulting in the large spikes seen in the plot. The Christmas/New Years period is the major exception in this pattern. Second, while the rate of incoming e-newsletters from Labour appears to be stable, the rate of Conservative e-newsletters had been on a slight decline prior to the local elections in May. Among Conservative MPs, both the top and bottom e-newsletter rate weeks declined from February to March and from March to April, well before the pre-election period of sensitivity was imposed on 11 April. Finally, we see a substantial spike in the number of Conservative e-newsletters the week of the local elections, driven largely by messages reminding constituents to vote. Interestingly, there does not seem to be a large corresponding spike in Labour e-newsletters the week of the elections.</p>
<p>Unfortunately, this brief descriptive look does not allow for a good assessment of causality (assuming there is a strong causal mechanism at play). Yet, it is not too much of a stretch to hypothesise that this pattern is influenced by the news cycle earlier this year and electoral incentives among Conservative MPs seeking to minimise local losses. It will be interesting to see how these patterns develop as the general election approaches.</p>
</section>
<section id="what-is-next" class="level2">
<h2 class="anchored" data-anchor-id="what-is-next">What is next?</h2>
<p>There is much more to come from the UK MP Inbox in the near future, so be sure to stay tuned. Expect to see simple analyses just like these in the coming months, exploring trends in the data based on constituency and MP demographics, assessing changes in those trends based on proximity to the election, and comparing those trends to similar patterns among U.S. legislators. I will also release updates on the progress of the Inbox’s public launch and share the official launch date as soon as I can.</p>
<p>In the meantime, if there are any topics you would like me to discuss, questions you would like me to answer, or general comments you would like to share, please reach out to me at <a href="mailto:adam.ozer@veriangroup.com">adam.ozer@veriangroup.com</a>.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This is particularly relevant as social media companies have increasingly deprioritised political and public policy news content on their platforms. For examples, see <a href="https://www.ft.com/content/8ebb8854-426b-46f8-9c5c-b8f988c298f7">Financial Times</a>, <a href="https://www.nbcnews.com/tech/instagram-will-stop-recommending-political-content-rcna138178">NBC</a>, and <a href="https://slate.com/technology/2023/10/elon-musk-x-twitter-news-links-headlines-why.html">Slate</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Free insofar that signing up to receive a newsletter costs nothing. The e-newsletters themselves are penned using staff (and under-appreciated interns) and resources paid for with taxpayer money.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Some MPs have left or taken office since data collection began in November, hence why the total number of MPs is not an even 650.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Many of which were quite old and buggy.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>This includes a handful of instances where the sign up form/link exists but is either broken or leads to a 404 error.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Please note that MPs who have lost the party whip have been grouped in with their relevant party (e.g.&nbsp;Diane Abbott would be counted under Labour). While Lee Anderson and Dan Poulter have switched parties since the beginning of data collection, they are listed as a Conservative MPs in these analyses solely for parsimony.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Even if we remove John Redwood as a clear outlier, the Tories have still sent 5 times as many e-newsletters as Labour.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-l. ozer2024" class="csl-entry quarto-appendix-citeas" role="listitem">
L. Ozer, Adam. 2024. <span>“The UK MP Inbox - A Sneak Peek.”</span> May
13, 2024. <a href="https://adamlozer.github.io/blog/posts/2024-03-18-mp-inbox-sneak-peak/">https://adamlozer.github.io/blog/posts/2024-03-18-mp-inbox-sneak-peak/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2024 Adam Ozer ∙ Made with <a href="https://quarto.org">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../../contact.qmd">
<p>Contact</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../license.qmd">
<p>License</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>